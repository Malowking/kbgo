server:
  address:     ":8000"
  openapiPath: "/api.json"
  swaggerPath: "/swagger"

logger:
  level : "all"
  stdout: true
  path: "logs"              # 日志文件保存路径
  file: "kbgo.log"          # 日志文件名
  rotateSize: "100MB"       # 日志文件大小限制，超过100MB自动轮转
  rotateBackupLimit: 5      # 保留的日志文件数量
  rotateBackupExpire: "7d"  # 日志文件过期时间
  rotateBackupCompress: 9   # 日志压缩级别 (0-9)

# 主数据库配置（用于存储知识库元数据、文档信息等）
# 支持 MySQL 和 PostgreSQL
#database:
#  default:
#    host: "localhost" # 地址
#    port: "3306" # MySQL端口: 3306, PostgreSQL端口: 5432
#    user: "root" # MySQL默认用户: root, PostgreSQL默认用户: postgres
#    pass: "your_password" # 密码
#    name: "kbgo" # 数据库名称
#    type: "mysql" # 数据库类型: mysql 或 pgsql
#    charset: "utf8mb4" # 数据库编码
#    maxLifeTime: 3600 # 连接最大生命周期(秒)

# === 使用 PostgreSQL 作为主数据库的示例配置 ===
database:
  default:
     host: "kbgo-postgres"
     port: "5432"
     user: "kbgo"
     pass: "kbgo123"
     name: "kbgo"
     type: "pgsql"
     charset: "utf8mb4"
     maxLifeTime: 3600

# 向量数据库配置
# 支持的类型: "milvus" 或 "pgvector"
# 注意：向量数据库可以独立于主数据库选择
vectorStore:
  type: "pgvector"

# Milvus 向量数据库配置
milvus:
  address: "localhost:19530"  # Milvus 服务地址
  database: "kbgo"             # Milvus 数据库名称
  dim: 1024                    # 向量维度

# PostgreSQL 向量数据库配置 (pgvector)
# 使用前需要先安装 pgvector 扩展: CREATE EXTENSION vector;
postgres:
  host: "kbgo-postgres"        # PostgreSQL 主机地址
  port: "5432"                 # PostgreSQL 端口
  user: "kbgo"                 # PostgreSQL 用户名
  password: "kbgo123"          # PostgreSQL 密码
  database: "kbgo"             # PostgreSQL 数据库名称
  sslmode: "disable"           # SSL 模式: disable, require, verify-ca, verify-full

# 文件存储配置
storage:
  # 存储类型: "rustfs" 或 "local"
  type: "local"

# rustfs文件存储配置
rustfs:
  endpoint: "http://localhost:9000"
  accessKey: "your_access_key"
  secretKey: "your_secret_key"
  bucketName: ""
  ssl: false

# 知识库检索默认参数配置
retriever:
  enableRewrite: false       # 是否启用查询重写（默认 false）
  rewriteAttempts: 3         # 查询重写尝试次数（默认 3）
  retrieveMode: "rerank"     # 检索模式: milvus/rerank/rrf（默认 rerank）

# 文档解析服务配置（Python file_parse 服务）
fileParse:
  url: "http://kbgo-file-parse:8002"  # file_parse 服务地址
  timeout: 120                         # 请求超时时间（秒），默认 120 秒

# Redis 缓存配置
redis:
  address: "kbgo-redis:6379"          # Redis 服务地址（Docker环境使用容器名）
  db: 0                                # Redis 数据库编号 (0-15)
  password: "kbgo123"                  # Redis 密码
  maxRetries: 3                        # 最大重试次数
  poolSize: 10                         # 连接池大小
  minIdleConns: 2                      # 最小空闲连接数
  cache:
    agentPresetTTL: 300                # Agent预设缓存过期时间（秒），默认 5分钟